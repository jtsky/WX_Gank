let img_items = [
  {
    "_id": "582ba25b421aa93a5939d4bc",
    "createdAt": "2016-11-16T08:03:39.788Z",
    "desc": "11-16",
    "publishedAt": "2016-11-16T11:37:18.947Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww3.sinaimg.cn/large/610dc034jw1f9tmhxq87lj20u011htae.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "582a56cb421aa9102c2ec6e7",
    "createdAt": "2016-11-15T08:28:59.621Z",
    "desc": "11-15",
    "publishedAt": "2016-11-15T11:26:11.821Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww3.sinaimg.cn/large/610dc034gw1f9shm1cajkj20u00jy408.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "58290634421aa911cf2e155c",
    "createdAt": "2016-11-14T08:32:52.84Z",
    "desc": "11-14",
    "publishedAt": "2016-11-14T11:36:49.680Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww3.sinaimg.cn/large/610dc034jw1f9rc3qcfm1j20u011hmyk.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "58250c1d421aa90e799ec2bf",
    "createdAt": "2016-11-11T08:09:01.465Z",
    "desc": "11-11",
    "publishedAt": "2016-11-11T12:03:10.196Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww3.sinaimg.cn/large/610dc034jw1f9nuk0nvrdj20u011haci.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "5823bc03421aa91369f95a1d",
    "createdAt": "2016-11-10T08:14:59.395Z",
    "desc": "11-10",
    "publishedAt": "2016-11-10T11:40:42.4Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww4.sinaimg.cn/large/610dc034jw1f9mp3xhjdhj20u00u0ta9.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "58228280421aa90e6f21b4e2",
    "createdAt": "2016-11-09T09:57:20.445Z",
    "desc": "11-9",
    "publishedAt": "2016-11-09T11:40:48.268Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww2.sinaimg.cn/large/610dc034gw1f9lmfwy2nij20u00u076w.jpg",
    "used": true,
    "who": "\u55b5~"
  },
  {
    "_id": "582147ef421aa90e799ec297",
    "createdAt": "2016-11-08T11:35:11.5Z",
    "desc": "11-8",
    "publishedAt": "2016-11-08T11:51:41.578Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww2.sinaimg.cn/large/610dc034gw1f9kjnm8uo1j20u00u0q5q.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "581fc2c0421aa91369f959f9",
    "createdAt": "2016-11-07T07:54:40.74Z",
    "desc": "11-7",
    "publishedAt": "2016-11-07T11:47:36.373Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww2.sinaimg.cn/large/610dc034jw1f9j7nvnwjdj20u00k0jsl.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "581bd560421aa91376974628",
    "createdAt": "2016-11-04T08:25:04.30Z",
    "desc": "11-4",
    "publishedAt": "2016-11-04T11:48:56.654Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww4.sinaimg.cn/large/610dc034jw1f9frojtu31j20u00u0go9.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "581a838a421aa90e799ec261",
    "createdAt": "2016-11-03T08:23:38.560Z",
    "desc": "11-3",
    "publishedAt": "2016-11-03T11:48:43.342Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww3.sinaimg.cn/large/610dc034jw1f9em0sj3yvj20u00w4acj.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "58193781421aa90e6f21b49f",
    "createdAt": "2016-11-02T08:46:57.726Z",
    "desc": "11-2",
    "publishedAt": "2016-11-02T11:49:08.835Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww4.sinaimg.cn/large/610dc034jw1f9dh2ohx2vj20u011hn0r.jpg",
    "used": true,
    "who": "daimajia"
  },
  {
    "_id": "5817e1fa421aa913769745fe",
    "createdAt": "2016-11-01T08:29:46.640Z",
    "desc": "11-1",
    "publishedAt": "2016-11-01T11:46:01.617Z",
    "source": "chrome",
    "type": "\u798f\u5229",
    "url": "http://ww1.sinaimg.cn/large/610dc034jw1f9cayjaa96j20u011hqbs.jpg",
    "used": true,
    "who": "daimajia"
  }
];

let common_items = [
  {
    "_id": "587c2ad5421aa9119735ac2c",
    "createdAt": "2017-01-16T10:07:17.691Z",
    "desc": "\u5176\u5b9eAndroid platform\u7684\u4e00\u4e9bAPI\u6709\u4e9b\u9c9c\u4e3a\u4eba\u77e5\uff0c\u4f46\u975e\u5e38\u6709\u7528\u7684\u65b9\u6cd5\u548c\u7c7b\uff0c\u53bb\u7814\u7a76\u4e00\u4e0b\u8fd9\u4e9bAPI\u662f\u975e\u5e38\u6709\u610f\u601d\u7684",
    "publishedAt": "2017-01-16T14:12:18.71Z",
    "source": "web",
    "type": "Android",
    "url": "http://mp.weixin.qq.com/s?__biz=MzA3OTk4ODkwNA==&mid=2449245595&idx=1&sn=c1617d32014bd232591137fd75b3a58b&chksm=8ba3345cbcd4bd4ad1caa6f09821957d802f74c3823fae3296a1aaba000f534cfead40a26e33#rd",
    "used": true,
    "who": "\u68a7\u6850"
  },
  {
    "_id": "587c3771421aa9119a6ca682",
    "createdAt": "2017-01-16T11:01:05.426Z",
    "desc": "\u4e00\u4e2a\u6709\u8da3\u7684Android\u5f55\u97f3\u52a8\u753b.(p(#\uffe3\u25bd\uffe3#)o)",
    "images": [
      "http://img.gank.io/d1009983-116e-4f86-b1a2-a8665dcff394"
    ],
    "publishedAt": "2017-01-16T14:12:18.71Z",
    "source": "web",
    "type": "Android",
    "url": "https://github.com/HeZaiJin/AnimatedRecordingView",
    "used": true,
    "who": "\u5f20\u6d69"
  },
  {
    "_id": "587c608f421aa911912f52c4",
    "createdAt": "2017-01-16T13:56:31.982Z",
    "desc": "Google \u653e\u51fa\u7684 Android \u6d6e\u52a8\u83dc\u5355\u6548\u679c\u3002",
    "images": [
      "http://img.gank.io/377e577d-5645-4061-b3b9-7e2e94d2d57c",
      "http://img.gank.io/3742db1d-e0c9-4858-b384-b7c3d223fd88"
    ],
    "publishedAt": "2017-01-16T14:12:18.71Z",
    "source": "chrome",
    "type": "Android",
    "url": "https://github.com/google/hover",
    "used": true,
    "who": "\u4ee3\u7801\u5bb6"
  },
  {
    "_id": "5877091e421aa93161103df7",
    "createdAt": "2017-01-12T12:42:06.839Z",
    "desc": "\u53e6\u8f9f\u8e4a\u5f84\u5b9e\u73b0Android\u591a\u6e20\u9053\u6253\u5305",
    "publishedAt": "2017-01-13T11:58:16.991Z",
    "source": "chrome",
    "type": "Android",
    "url": "https://yrom.net/blog/2015/05/25/the_other_way_to_package_multi_channel_apks/",
    "used": true,
    "who": "LHF"
  },
  {
    "_id": "587724fd421aa93161103dfa",
    "createdAt": "2017-01-12T14:41:01.560Z",
    "desc": "[\u8bd1]Android Application\u542f\u52a8\u6d41\u7a0b\u5206\u6790",
    "images": [
      "http://img.gank.io/be9571a9-99d7-4537-a291-0c772ec2f08f"
    ],
    "publishedAt": "2017-01-13T11:58:16.991Z",
    "source": "chrome",
    "type": "Android",
    "url": "http://www.jianshu.com/p/a5532ecc8377",
    "used": true,
    "who": "lxxself"
  },
  {
    "_id": "58774901421aa93161103dff",
    "createdAt": "2017-01-12T17:14:41.747Z",
    "desc": "Android\u7684.so\u6587\u4ef6\u3001ABI\u548cCPU\u7684\u5173\u7cfb",
    "publishedAt": "2017-01-13T11:58:16.991Z",
    "source": "chrome",
    "type": "Android",
    "url": "http://blog.csdn.net/xx326664162/article/details/51163905",
    "used": true,
    "who": "LHF"
  },
  {
    "_id": "587758d4421aa9315ea7993a",
    "createdAt": "2017-01-12T18:22:12.444Z",
    "desc": "Android \u52a0\u901f\u6784\u5efa\u65b9\u6848\u5bf9\u6bd4",
    "publishedAt": "2017-01-13T11:58:16.991Z",
    "source": "chrome",
    "type": "Android",
    "url": "https://www.zhihu.com/question/36892290/answer/125762516",
    "used": true,
    "who": "lxxself"
  },
  {
    "_id": "587848b6421aa9119a6ca669",
    "createdAt": "2017-01-13T11:25:42.7Z",
    "desc": "\u652f\u6301\u7ed9\u56fe\u7247\u52a0\u951a\u70b9\u7684 Android \u7ec4\u4ef6",
    "images": [
      "http://img.gank.io/82259ebd-f80b-4101-955f-ce3b37d942c3"
    ],
    "publishedAt": "2017-01-13T11:58:16.991Z",
    "source": "chrome",
    "type": "Android",
    "url": "https://github.com/jcodeing/AnchorImageView",
    "used": true,
    "who": "\u4ee3\u7801\u5bb6"
  },
  {
    "_id": "5875e66c421aa9315ea79931",
    "createdAt": "2017-01-11T16:01:48.998Z",
    "desc": "\u5728Chrome DevTools\u5185\u67e5\u770bAndroid\u8bbe\u5907\u4e0a\u6240\u6709HTTP(S)\u6d41\u91cf",
    "images": [
      "http://img.gank.io/b33cc839-18de-48e0-8644-089e6986609a",
      "http://img.gank.io/a4ce3373-2f20-4fe5-bbcf-9f6dc3847591"
    ],
    "publishedAt": "2017-01-12T11:30:59.369Z",
    "source": "web",
    "type": "Android",
    "url": "https://github.com/misakuo/Dream-Catcher",
    "used": true,
    "who": "moxun"
  },
  {
    "_id": "5876e940421aa93161103df1",
    "createdAt": "2017-01-12T10:26:08.237Z",
    "desc": "\u7c7b\u4f3c Facebook \u52a0\u8f7d\u65f6\uff0c\u6761\u76ee\u7684\u95ea\u70c1\u6548\u679c\uff0c\u9177\u9177\u7684\u3002",
    "images": [
      "http://img.gank.io/985a1011-632f-40c1-9ca5-1bd9cb17a69f",
      "http://img.gank.io/c5c916fc-b391-40ec-9962-df8588f23cba"
    ],
    "publishedAt": "2017-01-12T11:30:59.369Z",
    "source": "chrome",
    "type": "Android",
    "url": "https://github.com/sharish/ShimmerRecyclerView",
    "used": true,
    "who": "\u4ee3\u7801\u5bb6"
  }
];





//组合方法
function dataMix(columns, column, index, array) {
  if (columns[column]) {
    columns[column].push(array[index]);
  } else {
    let column_array = [];
    column_array.push(array[index]);
    columns.push(column_array);
  }
}


//从本地加载数据
function loadItemsfromLocal(config, pageIndex) {
  switch (pageIndex) {
    case 0:
      let arrayData = [];
      let {image_columns} = config.data;
     
      for (let index in img_items) {
        //分组
        dataMix(image_columns, index % 2, index, img_items);
      }

      setTimeout(function () {
        wx.stopPullDownRefresh();
        config.setData({ image_columns: image_columns, isLoading: false });
      }, 2000);

      break;

    case 1:
      let {android_columns} = config.data;
      for (let index in common_items) {
        //分组
        dataMix(android_columns, index % 1, index, common_items);
      }
      setTimeout(function () {
        wx.stopPullDownRefresh();
        config.setData({ android_columns: android_columns, isLoading: false });
      }, 2000);

      break;

    case 2:
      let {ios_columns} = config.data;
      for (let index in common_items) {
        //分组
        dataMix(ios_columns, index % 1, index, common_items);
      }
      setTimeout(function () {
        wx.stopPullDownRefresh();
        config.setData({ ios_columns: ios_columns, isLoading: false });
      }, 2000);

      break;

    case 3:
      let {all_columns} = config.data;
      for (let index in common_items) {
        //分组
        dataMix(all_columns, index % 1, index, common_items);
      }
      setTimeout(function () {
        wx.stopPullDownRefresh();
        config.setData({ all_columns: all_columns, isLoading: false });
      }, 2000);

      break;

    default:
      break;
  }


}


//从网络加载数据
function loadItemsFromNet(config, pageIndex) {
  let page = 0;
  switch (pageIndex) {
    case 0:
      let {image_columns} = config.data;
      if (image_columns[0]) {
        page = (image_columns[0].length + image_columns[1].length) / 10 + 1;
      } else {
        page = 1;
      }
      let url = encodeURI(`https://gank.io/api/data/福利/10/${page}`);
      wx.request({
        url: url,
        success: function (res) {
          let data = res.data.results;
          
          for (let index in data) {
            //分组
            dataMix(image_columns, index % 2, index, data);
          }
          config.setData({ image_columns: image_columns, isLoading: false });
          wx.stopPullDownRefresh();
        },
        fail: function (e) {
          wx.stopPullDownRefresh();
          config.setData({ isLoading: false });
          wx.showToast({
            title: '当前网络异常',
            icon: 'success',
            duration: 2000
          });
        }
      });

      break;

    case 1:
      let {android_columns} = config.data;
      if (android_columns[0]) {
        page = android_columns[0].length / 10 + 1;
      } else {
        page = 1;
      }
      wx.request({
        url: `https://gank.io/api/data/Android/10/${page}`,
        success: function (res) {
          let data = res.data.results;

          for (let index in data) {
            //分组
            dataMix(android_columns, index % 1, index, data);
          }
          config.setData({ android_columns: android_columns, isLoading: false });
          wx.stopPullDownRefresh();
        },
        fail: function (e) {
          wx.stopPullDownRefresh();
          config.setData({isLoading: false });
          wx.showToast({
            title: '当前网络异常',
            icon: 'success',
            duration: 2000
          });
        }
      });

      break;

    case 2:
      let {ios_columns} = config.data;
      if (ios_columns[0]) {
        page = ios_columns[0].length / 10 + 1;
      } else {
        page = 1;
      }
      wx.request({
        url: `https://gank.io/api/data/iOS/10/${page}`,
        success: function (res) {
          let data = res.data.results;

          for (let index in data) {
            //分组
            dataMix(ios_columns, index % 1, index, data);
          }
          config.setData({ ios_columns: ios_columns, isLoading: false });
          wx.stopPullDownRefresh();
        },
        fail: function (e) {
          wx.stopPullDownRefresh();
          config.setData({ isLoading: false });
          wx.showToast({
            title: '当前网络异常',
            icon: 'success',
            duration: 2000
          });
        }
      });
      break;

    case 3:
      let {all_columns} = config.data;
      if (all_columns[0]) {
        page = all_columns[0].length / 10 + 1;
      } else {
        page = 1;
      }
      wx.request({
        url: `https://gank.io/api/data/all/10/${page}`,
        success: function (res) {
          let data = res.data.results;
          for (let index in data) {
            //分组
            dataMix(all_columns, index % 1, index, data);
          }
          config.setData({ all_columns: all_columns, isLoading: false });
          wx.stopPullDownRefresh();
        },
        fail: function (e) {
          wx.stopPullDownRefresh();
          config.setData({ isLoading: false });
          wx.showToast({
            title: '当前网络异常',
            icon: 'success',
            duration: 2000
          });
        }
      });
      break;
    default:
      break;
  }

}

export { loadItemsfromLocal, loadItemsFromNet };